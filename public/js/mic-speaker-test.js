!function e(t,a,n){function i(r,s){if(!a[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=a[r]={exports:{}};t[r][0].call(l.exports,function(e){var a=t[r][1][e];return i(a||e)},l,l.exports,e,t,a,n)}return a[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,a){"use strict";t.exports={DEFAULT_CON_LANGUAGE:"Hindi",AUDIO_DURATION:6,SIXTY:60,HOUR_IN_SECONDS:3600,ALL_LANGUAGES:[{value:"Assamese",id:"as",text:"অসমীয়া",hasLocaleText:!0,data:!0},{value:"Bengali",id:"bn",text:"বাংলা",hasLocaleText:!0,data:!0},{value:"English",id:"en",text:"English",hasLocaleText:!0,data:!0},{value:"Gujarati",id:"gu",text:"ગુજરાતી",hasLocaleText:!0,data:!0},{value:"Hindi",id:"hi",text:"हिंदी",hasLocaleText:!0,data:!0},{value:"Kannada",id:"kn",text:"ಕನ್ನಡ",hasLocaleText:!0,data:!0},{value:"Malayalam",id:"ml",text:"മലയാളം",hasLocaleText:!0,data:!0},{value:"Marathi",id:"mr",text:"मराठी",hasLocaleText:!0,data:!0},{value:"Odia",id:"or",text:"ଓଡିଆ",hasLocaleText:!0,data:!0},{value:"Punjabi",id:"pa",text:"ਪੰਜਾਬੀ",hasLocaleText:!0,data:!0},{value:"Tamil",id:"ta",text:"தமிழ்",hasLocaleText:!0,data:!0},{value:"Telugu",id:"te",text:"తెలుగు",hasLocaleText:!0,data:!0}],TOP_LANGUAGES_BY_HOURS:"topLanguagesByHours",TOP_LANGUAGES_BY_SPEAKERS:"topLanguagesBySpeakers",AGGREGATED_DATA_BY_LANGUAGE:"aggregateDataCountByLanguage",LOCALE_STRINGS:"localeString",CONTRIBUTION_LANGUAGE:"contributionLanguage",BADGES:{bronze:{imgLg:"../img/bronze_badge.svg",imgSm:"../img/bronze_contributor.jpeg"},silver:{imgLg:"../img/silver_badge.svg",imgSm:"../img/silver_contributor.jpeg"},gold:{imgLg:"../img/gold_badge.svg",imgSm:"../img/gold_contributor.jpeg"},platinum:{imgLg:"../img/platinum_badge.svg",imgSm:"../img/platinum_contributor.jpeg"},certificate:{imgLg:"../img/certificate.svg",imgSm:"../img/certificate.svg"}},SPEAKER_DETAILS_KEY:"speakerDetails"}},{}],2:[function(e,t,a){"use strict";var n,i,o,r,s,c,l,d,u,g=e("../js/constants").LOCALE_STRINGS,m=[],v=0,f=5,h=44100,p=document.getElementById("mic-canvas"),x=p.getContext("2d"),A=null,L=$("#test-mic-button"),C=$("#play-speaker"),S=$("#test-mic-speakers"),T=$("#test-mic-speakers-button"),b=$("#test-mic-speakers-details"),w=$("#test-mic-close"),y=$("#no-noise"),_=$("#noise"),E=JSON.parse(localStorage.getItem(g));function U(e,t,a){for(var n=0;n<a.length;n++)e.setUint8(t+n,a.charCodeAt(n))}var k=function(){var e=null,t=null,a=0,o=0;return{start:function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(i){B();var r=window.AudioContext||window.webkitAudioContext;n=new r,h=n.sampleRate,e=n.createMediaStreamSource(i),t=n.createScriptProcessor(1024,1,1),e.connect(t),t.connect(n.destination),t.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);v+=1024,m.push(new Float32Array(t));for(var n=0,i=0,r=0;r<t.length;++r)i+=t[r]*t[r];n=Math.sqrt(i/t.length),a=Math.max(a,n),n=Math.max(n,o-.008),o=n,x.clearRect(0,0,p.width,p.height),x.fillStyle="#83E561",x.fillRect(0,0,p.width*(n/a),p.height)}}).catch(function(e){console.log(e),R()})},stop:function(){null!==e&&e.disconnect(),null!==t&&t.disconnect();var a=function(e,t){var a=new ArrayBuffer(44+2*e.length),n=new DataView(a);U(n,0,"RIFF"),n.setUint32(4,44+2*e.length,!0),U(n,8,"WAVE"),U(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,t,!0),n.setUint32(28,2*t,!0),n.setUint16(32,4,!0),n.setUint16(34,16,!0),U(n,36,"data"),n.setUint32(40,2*e.length,!0);for(var i=44,o=0;o<e.length;o++)n.setInt16(i,32767*e[o],!0),i+=2;return new Blob([n],{type:"audio/wav"})}(function(e,t){for(var a=new Float32Array(t),n=0,i=0;i<e.length;i++){var o=e[i];a.set(o,n),n+=o.length}return a}(m,v),h);if(null!==a){N(a);var n=URL.createObjectURL(a);return(i=new Audio(n)).onloadedmetadata=function(){var e=Math.ceil(1e3*i.duration);setTimeout(function(){R()},e)},{audioBlob:a,audioUrl:n,play:function(){i.play()}}}return console.log("No blob present"),null}}},R=function(){var e=$("#test-mic-text");n&&(n.close(),n=void 0),e.text(E["Test Mic"]),$("#mic-svg").removeClass("d-none"),L.attr("data-value","test-mic"),x.clearRect(0,0,p.width,p.height),f=5,clearInterval(o)},G=function(){cancelAnimationFrame(A),u&&u.clearRect(0,0,d.width,d.height),C.attr("data-value","test-speaker"),$("#test-speaker-text").text(E["Test Speakers"]),$("#speaker-svg").removeClass("d-none")},B=function(){$("#mic-msg").removeClass("invisible"),$("#mic-svg").addClass("d-none"),$("#test-mic-text").text(E["Recording for ".concat(f," seconds")]),L.attr("data-value","recording"),f--,o=setInterval(function(){I()},1e3)},I=function(){$("#test-mic-text").text(E["Recording for ".concat(f," seconds")]),0===--f&&(clearInterval(o),L.attr("data-value","stop-recording"),O("stop-recording"))},N=function(e){var t=new FormData;t.append("audio_data",e),fetch("/audio/snr",{method:"POST",body:t}).then(function(e){return e.json()}).then(function(e){var t,a,n;t=e,a=$("#no-noise"),n=$("#noise"),$("#mic-msg").addClass("d-none"),t.ambient_noise?n.removeClass("d-none"):a.removeClass("d-none")}).catch(function(e){console.log(e)})},O=function(e){$("#mic-msg").addClass("invisible").removeClass("d-none"),$("#no-noise").addClass("d-none"),$("#noise").addClass("d-none");var t=$("#test-mic-text"),a=k();if("test-mic"===e)m=[],v=0,a.start();else if("stop-recording"===e){a.stop().play(),L.attr("data-value","playing"),t.text(E["Playingback Audio"])}};T.on("click",function(e){S.addClass("d-none"),b.removeClass("d-none")}),w.on("click",function(e){S.removeClass("d-none"),b.addClass("d-none"),$("#mic-msg").addClass("invisible").removeClass("d-none"),y.addClass("d-none"),_.addClass("d-none"),m=[],v=0,i&&(i.pause(),i.currentTime=0),l&&(l.pause(),l.currentTime=0),R(),G()}),L.on("click",function(e){var t=$("#test-mic-button").attr("data-value");O(t)}),C.on("click",function(e){C.attr("data-value","playing"),$("#test-speaker-text").text(E.Playing),$("#speaker-svg").addClass("d-none"),function(){if((l=document.getElementById("test-speaker-hidden")).play(),!r){var e=window.AudioContext||window.webkitAudioContext;r=new e,c=r.createMediaElementSource(l),s=r.createAnalyser(),c.connect(s),s.connect(r.destination),s.fftSize=256}d=document.getElementById("speaker-canvas"),u=d.getContext("2d");var t=s.frequencyBinCount,a=50,n=new Uint8Array(t);!function e(){A=requestAnimationFrame(e),s.getByteFrequencyData(n);for(var t,i=0,o=0;o<n.length;++o)i+=n[o]*n[o];t=Math.sqrt(i/n.length),a=Math.max(a,t),u.clearRect(0,0,d.width,d.height),u.fillStyle="#83E561",u.fillRect(0,0,d.width*(t/a),d.height)}(),l.onended=function(){G()}}()})},{"../js/constants":1}]},{},[2]);